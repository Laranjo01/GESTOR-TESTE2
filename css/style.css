/* css/style.css - v2 (incorporating refinements) */

/* 1. Reset & Base Styles */
*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

:root {
    /* Color Palette (Dark Theme based on reference) */
    /* Use RGB versions for transparency */
    --rgb-bg-primary-dark: 15, 15, 15;        /* #0f0f0f */
    --rgb-bg-secondary-dark: 26, 26, 26;     /* #1a1a1a */
    --rgb-bg-tertiary-dark: 44, 44, 44;      /* #2c2c2c */

    --bg-primary-dark: rgb(var(--rgb-bg-primary-dark));
    /* Apply slight transparency to secondary/tertiary for background effect */
    --bg-secondary-dark: rgba(var(--rgb-bg-secondary-dark), 0.96); /* Slight transparency */
    --bg-tertiary-dark: rgba(var(--rgb-bg-tertiary-dark), 0.95);   /* Slight transparency */

    --text-primary-dark: #e0e0e0;
    --text-secondary-dark: #a0a0a0;
    --text-muted-dark: #707070;
    --accent-color: #ff8c00;
    --accent-color-darker: #e07b00;
    --accent-color-glow: rgba(255, 140, 0, 0.4);
    --accent-color-rgb: 255, 140, 0;
    --border-color-dark: rgba(58, 58, 58, 0.8); /* Slightly transparent border */
    --success-color: #28a745;
    --success-color-rgb: 40, 167, 69;
    --danger-color: #dc3545;
    --danger-color-rgb: 220, 53, 69;
    --warning-color: #ffc107;
    --warning-color-rgb: 255, 193, 7;
    --info-color: #0dcaf0;
    --purple-color: #6f42c1;

    /* Spacing & Sizing */
    --spacing-xs: 0.25rem;  /* 4px */
    --spacing-sm: 0.5rem;   /* 8px */
    --spacing-md: 1rem;     /* 16px */
    --spacing-lg: 1.5rem;   /* 24px */
    --spacing-xl: 2rem;     /* 32px */
    --spacing-xxl: 2.5rem;  /* 40px */

    --border-radius-sm: 4px;
    --border-radius-md: 8px;
    --border-radius-lg: 12px;

    /* Transitions */
    --transition-speed-fast: 0.15s;
    --transition-speed-medium: 0.3s;

    /* Fonts */
    --font-family-base: 'Poppins', sans-serif;
    --font-size-base: clamp(0.875rem, 1.5vw + 0.5rem, 1rem);
    --font-size-sm: clamp(0.75rem, 1vw + 0.5rem, 0.875rem);
    --font-size-lg: clamp(1.125rem, 2vw + 0.75rem, 1.25rem);
    --font-size-xl: clamp(1.5rem, 3vw + 1rem, 2rem);
    --font-size-xxl: clamp(2rem, 4vw + 1rem, 2.5rem);

    /* Shadows */
    --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.2), 0 1px 2px rgba(0, 0, 0, 0.1);
    --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.35), 0 2px 4px rgba(0, 0, 0, 0.2); /* Slightly stronger */
    --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.45), 0 4px 8px rgba(0, 0, 0, 0.25); /* Slightly stronger */
    --shadow-accent-glow: 0 0 15px var(--accent-color-glow);

    /* Sidebar Width */
    --sidebar-width: 260px;
}

body {
    font-family: var(--font-family-base);
    font-size: var(--font-size-base);
    line-height: 1.6;
    background-color: var(--bg-primary-dark);
    color: var(--text-primary-dark);
    position: relative;
    overflow-x: hidden;
}

body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('https://png.pngtree.com/background/20210716/original/pngtree-geometry-futuristic-vector-layered-square-linear-construction-decorative-seamless-patterns-for-picture-image_1344716.jpg');
    background-size: cover;
    background-position: center;
    filter: blur(6px) opacity(0.15); /* Adjusted blur/opacity */
    z-index: -1;
    pointer-events: none;
}

h1, h2, h3, h4, h5, h6 { margin-bottom: var(--spacing-sm); font-weight: 600; line-height: 1.3; }
a { color: var(--accent-color); text-decoration: none; transition: color var(--transition-speed-fast); }
a:hover { color: var(--accent-color-darker); text-decoration: underline; }

/* Custom Scrollbar */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: rgba(var(--rgb-bg-secondary-dark), 0.5); border-radius: 10px; }
::-webkit-scrollbar-thumb { background: rgba(var(--rgb-bg-tertiary-dark), 0.8); border-radius: 10px; border: 1px solid var(--border-color-dark); }
::-webkit-scrollbar-thumb:hover { background: var(--text-muted-dark); }

/* 2. Layout (Sidebar & Main Content) */
.sidebar { position: fixed; top: 0; left: 0; width: var(--sidebar-width); height: 100vh; background-color: var(--bg-secondary-dark); border-right: 1px solid var(--border-color-dark); display: flex; flex-direction: column; z-index: 1000; transition: transform var(--transition-speed-medium) ease-in-out, width var(--transition-speed-medium) ease-in-out; transform: translateX(0); box-shadow: var(--shadow-md); }
.main-content { margin-left: var(--sidebar-width); padding: var(--spacing-lg); transition: margin-left var(--transition-speed-medium) ease-in-out; min-height: 100vh; }

@media (max-width: 992px) {
    .sidebar { transform: translateX(-100%); }
    .sidebar.open { transform: translateX(0); }
    .main-content { margin-left: 0; }
}

/* 3. Header */
.header { display: flex; align-items: center; margin-bottom: var(--spacing-lg); padding-bottom: var(--spacing-md); border-bottom: 1px solid var(--border-color-dark); }
.menu-toggle { display: none; background: none; border: none; color: var(--text-primary-dark); font-size: 1.5rem; cursor: pointer; margin-right: var(--spacing-md); padding: var(--spacing-xs); border-radius: var(--border-radius-sm); transition: background-color var(--transition-speed-fast); }
.menu-toggle:hover { background-color: var(--bg-tertiary-dark); }
.page-title { font-size: var(--font-size-xl); color: var(--text-primary-dark); margin-bottom: 0; flex-grow: 1; font-weight: 500; }

@media (max-width: 992px) { .menu-toggle { display: inline-block; } }

/* 4. Sidebar Content */
.sidebar-header { display: flex; align-items: center; justify-content: space-between; padding: var(--spacing-lg); border-bottom: 1px solid var(--border-color-dark); flex-shrink: 0; }
.sidebar-title { font-size: var(--font-size-lg); color: var(--text-primary-dark); margin-bottom: 0; display: flex; align-items: center; font-weight: 600; }
.sidebar-title i { margin-right: var(--spacing-sm); color: var(--accent-color); }
.close-sidebar { display: none; background: none; border: none; color: var(--text-secondary-dark); font-size: 1.8rem; cursor: pointer; line-height: 1; padding: 0; }
.close-sidebar:hover { color: var(--text-primary-dark); }
@media (max-width: 992px) { .close-sidebar { display: block; } }

.sidebar-search { padding: var(--spacing-md); flex-shrink: 0; }
.search-input-wrapper { position: relative; }
.search-input-wrapper i { position: absolute; left: var(--spacing-md); top: 50%; transform: translateY(-50%); color: var(--text-muted-dark); pointer-events: none; }
.search-input-wrapper input { width: 100%; padding: var(--spacing-sm) var(--spacing-sm) var(--spacing-sm) 2.5rem; background-color: var(--bg-tertiary-dark); border: 1px solid var(--border-color-dark); border-radius: var(--border-radius-md); color: var(--text-primary-dark); font-size: var(--font-size-sm); }
.search-input-wrapper input::placeholder { color: var(--text-muted-dark); }
.search-input-wrapper input:focus { border-color: var(--accent-color); box-shadow: 0 0 0 3px var(--accent-color-glow); outline: none; }

.sidebar-menu { flex-grow: 1; overflow-y: auto; padding: var(--spacing-sm) 0; }
.menu-item { display: flex; align-items: center; padding: calc(var(--spacing-sm) * 1.2) var(--spacing-lg); color: var(--text-secondary-dark); cursor: pointer; transition: background-color var(--transition-speed-fast), color var(--transition-speed-fast), border-color var(--transition-speed-fast); border-left: 4px solid transparent; margin: 2px 0; }
.menu-item i { width: 22px; margin-right: var(--spacing-md); text-align: center; transition: color var(--transition-speed-fast); font-size: 1.1em; }
.menu-item span { flex-grow: 1; font-size: var(--font-size-base); font-weight: 400; }
.menu-item:hover { background-color: var(--bg-tertiary-dark); color: var(--text-primary-dark); border-left-color: var(--bg-tertiary-dark); }
.menu-item.active { color: var(--accent-color); background-color: rgba(var(--accent-color-rgb), 0.1); border-left-color: var(--accent-color); font-weight: 500; }
.menu-item.active i { color: var(--accent-color); }

.sidebar-footer { padding: var(--spacing-md); border-top: 1px solid var(--border-color-dark); background-color: var(--bg-secondary-dark); flex-shrink: 0; }
.sidebar-footer-actions { display: flex; justify-content: space-around; margin-bottom: var(--spacing-md); gap: var(--spacing-sm); }
.footer-action-btn { background: none; border: 1px solid var(--border-color-dark); color: var(--text-secondary-dark); font-size: 1.1rem; cursor: pointer; padding: var(--spacing-sm); border-radius: var(--border-radius-md); transition: all var(--transition-speed-fast); width: 42px; height: 42px; display: flex; align-items: center; justify-content: center; }
.footer-action-btn:hover { background-color: var(--bg-tertiary-dark); color: var(--accent-color); border-color: var(--accent-color); box-shadow: 0 0 5px var(--accent-color-glow); }
.user-profile { display: flex; align-items: center; margin-top: var(--spacing-md); padding-top: var(--spacing-md); border-top: 1px solid var(--border-color-dark); }
.user-avatar { width: 40px; height: 40px; border-radius: 50%; background-color: var(--bg-tertiary-dark); color: var(--accent-color); display: flex; align-items: center; justify-content: center; margin-right: var(--spacing-md); font-size: 1.2rem; border: 2px solid var(--border-color-dark); flex-shrink: 0; }
.user-name { font-weight: 500; color: var(--text-primary-dark); font-size: var(--font-size-base); line-height: 1.2; }
.user-email { font-size: var(--font-size-sm); color: var(--text-secondary-dark); line-height: 1.2; word-break: break-all; }

/* 5. Content Sections Visibility */
.content-section { display: none; animation: fadeIn 0.4s ease-out; }
.content-section.active { display: block; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }

/* 6. Cards */
.card { background-color: var(--bg-secondary-dark); /* Uses transparent var */ border-radius: var(--border-radius-lg); margin-bottom: var(--spacing-xl); /* INCREASED spacing between cards */ border: 1px solid var(--border-color-dark); box-shadow: 0 3px 12px rgba(0, 0, 0, 0.25); overflow: hidden; display: flex; flex-direction: column; }
.card-header { padding: var(--spacing-md) var(--spacing-lg); border-bottom: 1px solid var(--border-color-dark); display: flex; justify-content: space-between; align-items: center; min-height: 60px; }
.card-title { font-size: var(--font-size-lg); margin-bottom: 0; color: var(--text-primary-dark); font-weight: 500; }
.card-header i:not(.card-title i) { color: var(--text-secondary-dark); font-size: 1.2rem; }
/* Filters specific styling */
.card-header.filters { flex-wrap: wrap; /* Allow filters to wrap */ gap: var(--spacing-sm) var(--spacing-md); /* Vertical and horizontal gap */ }
.filter-group { display: flex; align-items: center; gap: var(--spacing-xs); flex: 1 1 auto; /* Allow shrinking/growing but auto basis */ min-width: 140px; /* Prevent excessive crushing */ }
.filter-group select, .filter-group input { flex-grow: 1; width: auto; /* Override default 100% width */ min-width: 100px; }
.filter-group-search { min-width: 180px; /* Give search more space */ flex-grow: 2; /* Allow search to take more space */ }
.filter-group label { margin-bottom: 0; margin-right: var(--spacing-xs); white-space: nowrap; }
.filters .btn-sm { flex-shrink: 0; /* Prevent clear button shrinking */ }

.card-body { padding: var(--spacing-lg); flex-grow: 1; }
.card-footer { padding: var(--spacing-md) var(--spacing-lg); border-top: 1px solid var(--border-color-dark); background-color: rgba(0, 0, 0, 0.1); display: flex; justify-content: space-between; align-items: center; font-size: var(--font-size-sm); color: var(--text-secondary-dark); min-height: 50px; }
.card-footer i { margin-right: var(--spacing-sm); }

/* Balance Card Variations */
.balance-card { text-align: center; }
.balance-card .card-header { justify-content: center; flex-direction: column; padding-bottom: var(--spacing-sm); }
.balance-card .card-header .card-title { margin-bottom: var(--spacing-xs); font-size: var(--font-size-base); font-weight: 400; color: var(--text-secondary-dark); }
.balance-card .card-header i { font-size: 2rem; margin-bottom: var(--spacing-sm); }
.balance-card .card-body { padding: var(--spacing-md) var(--spacing-lg); }
.balance-card .card-value { font-size: var(--font-size-xxl); font-weight: 600; color: var(--text-primary-dark); margin-bottom: var(--spacing-xs); line-height: 1.1; letter-spacing: -0.5px; }
.balance-card .card-footer { justify-content: center; font-style: italic; }
.balance-card.pix .card-header i { color: var(--info-color); }
.balance-card.cash .card-header i { color: var(--success-color); }
.balance-card.card-balance .card-header i { color: var(--purple-color); }

/* Chart Cards */
.chart-card { position: relative; }
.chart-title { text-align: center; font-size: var(--font-size-base); color: var(--text-secondary-dark); padding: var(--spacing-md) var(--spacing-md) 0; margin-bottom: var(--spacing-md); font-weight: 500; }
.chart-container { padding: 0 var(--spacing-md) var(--spacing-md); min-height: 280px; position: relative; display: flex; justify-content: center; align-items: center; }
.chart-container canvas { max-width: 100%; max-height: 320px; }
.chart-empty-message { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: var(--text-muted-dark); text-align: center; }
.chart-empty-message i { font-size: 1.8rem; margin-bottom: var(--spacing-sm); display: block; color: var(--text-muted-dark); }

/* 7. Buttons */
.btn { display: inline-flex; align-items: center; justify-content: center; gap: var(--spacing-xs); font-weight: 500; line-height: 1.5; color: var(--text-primary-dark); text-align: center; vertical-align: middle; cursor: pointer; user-select: none; background-color: transparent; border: 1px solid transparent; padding: clamp(0.4rem, 1vw + 0.1rem, 0.6rem) clamp(0.8rem, 1.5vw + 0.25rem, 1.2rem); font-size: var(--font-size-base); border-radius: var(--border-radius-md); transition: all var(--transition-speed-fast) ease-in-out; }
.btn i { margin-right: 0; }
.btn-primary { color: var(--bg-secondary-dark); background-color: var(--accent-color); border-color: var(--accent-color); font-weight: 600; }
.btn-primary:hover { color: var(--bg-secondary-dark); background-color: var(--accent-color-darker); border-color: var(--accent-color-darker); box-shadow: var(--shadow-accent-glow); transform: translateY(-1px); }
.btn-outline, .btn-outline-secondary { color: var(--accent-color); border-color: var(--accent-color); background-color: transparent; }
.btn-outline:hover, .btn-outline-secondary:hover { color: var(--bg-secondary-dark); background-color: var(--accent-color); border-color: var(--accent-color); box-shadow: 0 0 8px var(--accent-color-glow); }
.btn-outline-secondary { color: var(--text-secondary-dark); border-color: var(--border-color-dark); }
.btn-outline-secondary:hover { color: var(--text-primary-dark); background-color: var(--bg-tertiary-dark); border-color: var(--text-secondary-dark); box-shadow: none; }
.btn-outline-danger { color: var(--danger-color); border-color: var(--danger-color); }
.btn-outline-danger:hover { color: #fff; background-color: var(--danger-color); }
.btn-success { color: #fff; background-color: var(--success-color); border-color: var(--success-color); }
.btn-success:hover { filter: brightness(0.9); }
.btn-danger { color: #fff; background-color: var(--danger-color); border-color: var(--danger-color); }
.btn-danger:hover { filter: brightness(0.9); }
.btn-sm { padding: clamp(0.25rem, 0.8vw + 0.1rem, 0.4rem) clamp(0.5rem, 1vw + 0.2rem, 0.8rem); font-size: var(--font-size-sm); border-radius: var(--border-radius-sm); gap: calc(var(--spacing-xs) / 2); }
.btn:disabled, button[disabled] { cursor: not-allowed; opacity: 0.5; filter: grayscale(50%); box-shadow: none; transform: none; }

.floating-action-btn { position: fixed; bottom: var(--spacing-lg); right: var(--spacing-lg); width: 60px; height: 60px; background-color: var(--accent-color); color: var(--bg-secondary-dark); border-radius: 50%; border: none; display: flex; align-items: center; justify-content: center; font-size: 1.6rem; box-shadow: var(--shadow-lg), 0 0 15px var(--accent-color-glow); cursor: pointer; z-index: 999; transition: all var(--transition-speed-medium) ease-out; }
.floating-action-btn:hover { background-color: var(--accent-color-darker); transform: scale(1.05) translateY(-2px); box-shadow: var(--shadow-lg), 0 0 25px var(--accent-color-glow); }

/* 8. Forms */
.form-group { margin-bottom: var(--spacing-md); }
.form-label, label { display: block; margin-bottom: var(--spacing-xs); font-size: var(--font-size-sm); color: var(--text-secondary-dark); font-weight: 500; }
.form-control, .form-select, textarea { display: block; width: 100%; padding: clamp(0.5rem, 1vw + 0.2rem, 0.75rem) clamp(0.75rem, 1.5vw + 0.3rem, 1rem); font-size: var(--font-size-base); font-weight: 400; line-height: 1.5; color: var(--text-primary-dark); background-color: var(--bg-tertiary-dark); background-clip: padding-box; border: 1px solid var(--border-color-dark); appearance: none; border-radius: var(--border-radius-md); transition: border-color var(--transition-speed-fast) ease-in-out, box-shadow var(--transition-speed-fast) ease-in-out; }
.form-control::placeholder, textarea::placeholder { color: var(--text-muted-dark); opacity: 1; }
.form-control:focus, .form-select:focus, textarea:focus { color: var(--text-primary-dark); background-color: var(--bg-tertiary-dark); border-color: var(--accent-color); outline: 0; box-shadow: 0 0 0 3px var(--accent-color-glow); }
.form-select { background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23a0a0a0' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e"); background-repeat: no-repeat; background-position: right var(--spacing-md) center; background-size: 16px 12px; padding-right: calc(var(--spacing-md) * 2.5); }
.form-select option { background-color: var(--bg-secondary-dark); color: var(--text-primary-dark); }
.form-select option:disabled, .category-title-option { color: var(--text-muted-dark); font-style: italic; background-color: var(--bg-tertiary-dark); }
.category-title-option { font-weight: bold; padding-top: 10px; }
textarea { min-height: 100px; resize: vertical; }
.form-row { display: flex; gap: var(--spacing-md); flex-wrap: wrap; }
.form-row .form-group { flex: 1 1 0; min-width: 150px; }
.form-control-sm, .form-select-sm { padding: clamp(0.25rem, 0.8vw + 0.1rem, 0.4rem) clamp(0.5rem, 1vw + 0.2rem, 0.8rem); font-size: var(--font-size-sm); border-radius: var(--border-radius-sm); }
.form-select-sm { background-position: right var(--spacing-sm) center; padding-right: calc(var(--spacing-sm) * 2.5); }
.text-muted { color: var(--text-muted-dark) !important; }
.small, small { font-size: var(--font-size-sm); }
.form-check { display: flex; align-items: center; margin-bottom: var(--spacing-sm); }
.form-check-input { width: 1.1em; height: 1.1em; margin-top: 0.2em; margin-right: 0.6em; background-color: var(--bg-tertiary-dark); border: 1px solid var(--border-color-dark); appearance: none; border-radius: 3px; cursor: pointer; transition: background-color var(--transition-speed-fast), border-color var(--transition-speed-fast); flex-shrink: 0; }
.form-check-input[type="radio"] { border-radius: 50%; }
.form-check-input:checked { background-color: var(--accent-color); border-color: var(--accent-color); background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%230f0f0f' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M6 10l3 3l6-6'/%3e%3c/svg%3e"); background-size: 65%; background-position: center; background-repeat: no-repeat; }
.form-check-label { margin-bottom: 0; font-size: var(--font-size-base); color: var(--text-secondary-dark); cursor: pointer; }
.input-group { display: flex; position: relative; }
.input-group .form-control { border-radius: 0 var(--border-radius-md) var(--border-radius-md) 0; }
.input-group-text { display: flex; align-items: center; padding: clamp(0.5rem, 1vw + 0.2rem, 0.75rem) var(--spacing-md); font-size: var(--font-size-base); font-weight: 400; line-height: 1.5; color: var(--text-secondary-dark); text-align: center; white-space: nowrap; background-color: var(--bg-tertiary-dark); border: 1px solid var(--border-color-dark); border-radius: var(--border-radius-md) 0 0 var(--border-radius-md); border-right: 0; }

/* 9. Modals */
.modal-overlay { position: fixed; inset: 0; background-color: rgba(0, 0, 0, 0.75); display: flex; align-items: center; justify-content: center; z-index: 1050; opacity: 0; visibility: hidden; transition: opacity var(--transition-speed-medium), visibility var(--transition-speed-medium); backdrop-filter: blur(6px); padding: var(--spacing-md); }
.modal-overlay.active { opacity: 1; visibility: visible; }
.modal { background-color: var(--bg-secondary-dark); border-radius: var(--border-radius-lg); box-shadow: var(--shadow-lg); border: 1px solid var(--border-color-dark); width: 100%; max-width: 600px; max-height: 90vh; display: flex; flex-direction: column; overflow: hidden; transform: scale(0.95) translateY(10px); transition: transform var(--transition-speed-medium) ease-out; }
.modal-overlay.active .modal { transform: scale(1) translateY(0); }
.modal-header { padding: var(--spacing-md) var(--spacing-lg); border-bottom: 1px solid var(--border-color-dark); display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; min-height: 60px; }
.modal-title { font-size: var(--font-size-lg); margin-bottom: 0; color: var(--text-primary-dark); font-weight: 500; }
.modal-close { background: none; border: none; font-size: 1.8rem; color: var(--text-secondary-dark); cursor: pointer; line-height: 1; padding: 0; opacity: 0.7; transition: opacity var(--transition-speed-fast), color var(--transition-speed-fast); }
.modal-close:hover { opacity: 1; color: var(--text-primary-dark); }
.modal-body { padding: var(--spacing-lg); overflow-y: auto; flex-grow: 1; }
.modal-footer { padding: var(--spacing-md) var(--spacing-lg); border-top: 1px solid var(--border-color-dark); display: flex; justify-content: flex-end; gap: var(--spacing-sm); flex-shrink: 0; background-color: rgba(0,0,0, 0.1); }
.modal-sm { max-width: 400px; }
.modal-lg { max-width: 800px; }
.modal-xl { max-width: 1140px; }
.modal-alert-info .modal-title i, .modal-alert-success .modal-title i { color: var(--info-color); }
.modal-alert-warning .modal-title i { color: var(--warning-color); }
.modal-alert-danger .modal-title i { color: var(--danger-color); }
.modal-small { max-width: 450px; }
.modal-small .modal-body { text-align: center; }
.modal-small .modal-footer { justify-content: center; }

/* Transaction Detail Modal Improved */
.transaction-detail-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: var(--spacing-md) var(--spacing-lg); /* Increased gap */ margin-bottom: var(--spacing-lg); padding-bottom: var(--spacing-md); border-bottom: 1px solid var(--border-color-dark); }
.detail-field-container { padding-bottom: var(--spacing-sm); /* Spacing below each field */ }
.detail-field-container strong { color: var(--text-secondary-dark); margin-right: var(--spacing-sm); display: inline-block; width: 80px; /* Align labels */ font-weight: 500; }
.detail-field-container span { color: var(--text-primary-dark); }
.detail-field-container span i { margin-right: 6px; color: var(--text-muted-dark); width: 1.1em; text-align: center; }
.detail-field-container span.income i { color: var(--success-color); }
.detail-field-container span.expense i { color: var(--danger-color); }
/* Span full width for longer fields */
#descriptionContainer, #originContainer { grid-column: 1 / -1; /* Span all columns */ margin-top: var(--spacing-md); padding-top: var(--spacing-md); border-top: 1px dashed var(--border-color-dark); }
.detail-section strong { color: var(--text-secondary-dark); display: block; margin-bottom: var(--spacing-xs); font-weight: 500; }
.detail-section span, .detail-section div { /* Target span or potential div wrappers */ color: var(--text-primary-dark); line-height: 1.6; }
/* Highlight Reversible Text (also in Details) */
.detail-section small.text-success { color: var(--success-color) !important; font-weight: 600; display: inline-block; background-color: rgba(var(--success-color-rgb), 0.15); padding: 3px 6px; border-radius: var(--border-radius-sm); line-height: 1.3; margin-top: var(--spacing-xs); }

/* 10. Specific Component Styles */
.dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: var(--spacing-xl); /* INCREASED gap */ margin-bottom: var(--spacing-lg); }
.charts-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--spacing-lg); margin-bottom: var(--spacing-lg); }
.settings-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: var(--spacing-lg); }
.settings-block .card-header i { color: var(--accent-color); margin-right: var(--spacing-sm); }
.balance-methods { display: flex; flex-direction: column; gap: var(--spacing-md); }
.balance-method { display: flex; align-items: center; gap: var(--spacing-sm); padding: var(--spacing-sm); border: 1px solid var(--border-color-dark); border-radius: var(--border-radius-md); background-color: var(--bg-primary-dark); }
.balance-method-icon { width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 1rem; }
.balance-method-icon.pix { background-color: var(--info-color); color: #fff;}
.balance-method-icon.cash { background-color: var(--success-color); color: #fff;}
.balance-method-icon.card { background-color: var(--purple-color); color: #fff;}
.balance-method-details { flex-grow: 1; }
.balance-method-name { font-weight: 500; font-size: var(--font-size-base); }
.balance-method-amount { font-size: var(--font-size-sm); color: var(--text-secondary-dark); }
.balance-method-actions { display: flex; gap: var(--spacing-xs); }
/* Larger +/- buttons */
.balance-method-actions .balance-adjust.btn-sm { padding: 0.35rem 0.6rem; font-size: 0.85rem; line-height: 1; }
.balance-method-input { width: 100px; text-align: right; margin-left: auto; }
.balance-method-input.balance-updated-highlight { border-color: var(--success-color); box-shadow: 0 0 5px var(--success-color); }
.theme-colors { display: flex; flex-wrap: wrap; gap: var(--spacing-sm); margin-top: var(--spacing-xs); }
.theme-color-option { width: 30px; height: 30px; border-radius: 50%; cursor: pointer; border: 3px solid transparent; transition: border-color var(--transition-speed-fast), transform var(--transition-speed-fast); position: relative; box-shadow: inset 0 0 3px rgba(0,0,0,0.3); }
.theme-color-option:hover { transform: scale(1.1); }
.theme-color-option.selected { border-color: var(--accent-color); }
.theme-color-option[data-color="masculine-1"] { background: linear-gradient(135deg, #1e88e5, #0d47a1); }
.theme-color-option[data-color="masculine-2"] { background: linear-gradient(135deg, #0d47a1, #004d40); }
.theme-color-option[data-color="masculine-3"] { background: linear-gradient(135deg, #004d40, #1e88e5); }
.theme-color-option[data-color="feminine-1"] { background: linear-gradient(135deg, #d81b60, #8e24aa); }
.theme-color-option[data-color="feminine-2"] { background: linear-gradient(135deg, #8e24aa, #5e35b1); }
.theme-color-option[data-color="feminine-3"] { background: linear-gradient(135deg, #5e35b1, #d81b60); }
.data-actions { display: flex; gap: var(--spacing-sm); }

.transaction-list, .scheduled-list { display: flex; flex-direction: column; gap: var(--spacing-sm); }
.transaction-item, .bill-item { /* Apply slight transparency */ background-color: var(--bg-tertiary-dark); }
.transaction-item { display: flex; align-items: center; padding: var(--spacing-md); border-radius: var(--border-radius-md); border: 1px solid var(--border-color-dark); transition: all var(--transition-speed-fast); cursor: pointer; }
.transaction-item:hover { background-color: var(--bg-secondary-dark); transform: translateY(-2px); box-shadow: 0 3px 8px rgba(0,0,0,0.3); }
.transaction-icon { width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: var(--spacing-md); color: var(--bg-secondary-dark); font-size: 1.1rem; flex-shrink: 0; }
.transaction-icon.bg-success { background-color: var(--success-color); }
.transaction-icon.bg-danger { background-color: var(--danger-color); }
.transaction-details { flex-grow: 1; margin-right: var(--spacing-md); overflow: hidden; }
.transaction-title { font-weight: 500; margin-bottom: var(--spacing-xs); color: var(--text-primary-dark); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.transaction-meta { font-size: var(--font-size-sm); color: var(--text-secondary-dark); display: flex; gap: var(--spacing-sm); flex-wrap: wrap; }
.transaction-meta span { display: inline-flex; align-items: center; }
.transaction-meta i { margin-right: var(--spacing-xs); color: var(--text-muted-dark); }
.transaction-payment-method { font-size: var(--font-size-sm); color: var(--text-secondary-dark); display: inline-flex; align-items: center; margin-top: var(--spacing-xs); padding: 2px 6px; border-radius: var(--border-radius-sm); background-color: rgba(255,255,255, 0.05); }
.transaction-payment-method i { margin-right: 4px;}
.transaction-amount { font-weight: 600; font-size: var(--font-size-lg); margin-left: auto; text-align: right; white-space: nowrap; }
.amount-positive { color: var(--success-color); }
.amount-negative { color: var(--danger-color); }

/* Modern Action Buttons (No Background/Border) */
.transaction-actions, .goal-actions, .note-actions, .bill-actions { display: flex; gap: var(--spacing-sm); /* More gap */ margin-left: var(--spacing-md); }
.transaction-actions .action-btn, .goal-actions .action-btn, .note-actions .action-btn, .bill-actions .action-btn:not(.manual-pay-btn) {
    background: none;
    border: none;
    color: var(--text-secondary-dark);
    font-size: 1.1rem; /* Larger icon */
    cursor: pointer;
    padding: var(--spacing-xs); /* Small padding for click area */
    border-radius: 50%; /* Circular click area */
    transition: color var(--transition-speed-fast), background-color var(--transition-speed-fast);
    width: 32px; /* Consistent size */
    height: 32px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
}
.transaction-actions .action-btn:hover, .goal-actions .action-btn:hover, .note-actions .action-btn:hover, .bill-actions .action-btn:hover:not(.manual-pay-btn) {
    background-color: rgba(var(--accent-color-rgb), 0.1); /* Subtle hover bg */
}
.transaction-actions .action-btn.delete-transaction:hover,
.goal-actions .action-btn.delete-goal:hover,
.note-actions .action-btn.delete-note:hover,
.bill-actions .action-btn.delete-scheduled-item-btn:hover {
    color: var(--danger-color);
    background-color: rgba(var(--danger-color-rgb), 0.1);
}
.transaction-actions .action-btn.edit-transaction:hover,
.goal-actions .action-btn.edit-goal:hover,
.note-actions .action-btn.edit-note:hover {
    color: var(--accent-color);
    background-color: rgba(var(--accent-color-rgb), 0.1);
}
/* Keep opacity rules for hover reveal on desktop */
.transaction-actions, .goal-actions .action-btn, .note-actions { opacity: 0; }
.transaction-item:hover .transaction-actions, .goal-item:hover .goal-actions .action-btn, .note-card:hover .note-actions { opacity: 1; }
/* Ensure bill actions are always visible if needed */
.bill-actions { opacity: 1; }

.scheduled-origin-indicator { font-size: 0.7em; color: var(--info-color); margin-left: 4px; cursor: help; vertical-align: middle; }
.transaction-description-icon { font-size: 0.8em; color: var(--text-muted-dark); margin-left: 4px; cursor: help; vertical-align: middle; }
.new-transaction-highlight { animation: highlight-new 3s ease-out; border-left: 4px solid var(--accent-color); }
@keyframes highlight-new { 0% { background-color: rgba(var(--accent-color-rgb), 0.2); transform: scale(1); } 15% { background-color: rgba(var(--accent-color-rgb), 0.2); transform: scale(1.02); } 100% { background-color: var(--bg-tertiary-dark); transform: scale(1); } }

.bill-item { display: flex; align-items: center; padding: var(--spacing-md); border-radius: var(--border-radius-md); border-left: 4px solid var(--text-muted-dark); transition: background-color var(--transition-speed-fast), border-color var(--transition-speed-fast); }
.bill-item:hover { background-color: var(--bg-secondary-dark); }
.bill-item.paid { border-left-color: var(--success-color); opacity: 0.7; }
.bill-item.overdue { border-left-color: var(--danger-color); }
.bill-item.pending { border-left-color: var(--info-color); }
.bill-item.insufficient-balance { border-left-color: var(--warning-color); }
.bill-category-icon { width: 40px; height: 40px; border-radius: var(--border-radius-md); background-color: var(--bg-secondary-dark); color: var(--accent-color); display: flex; align-items: center; justify-content: center; margin-right: var(--spacing-md); font-size: 1.2rem; flex-shrink: 0; border: 1px solid var(--border-color-dark); }
.bill-details { flex-grow: 1; margin-right: var(--spacing-md); overflow: hidden; }
.bill-title { font-weight: 500; color: var(--text-primary-dark); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.bill-category-text { font-size: var(--font-size-sm); color: var(--text-secondary-dark); }
.bill-meta { font-size: var(--font-size-sm); color: var(--text-secondary-dark); margin-top: var(--spacing-xs); display: flex; gap: var(--spacing-xs) var(--spacing-sm); align-items: center; flex-wrap: wrap;}
.bill-meta .separator { color: var(--text-muted-dark); }
.bill-meta i { color: var(--text-muted-dark); margin-right: 3px; width: 1em; text-align: center; }
.bill-meta .text-success i { color: var(--success-color); }
.bill-meta .text-danger i { color: var(--danger-color); }
.bill-meta .text-warning i { color: var(--warning-color); }
.bill-meta .text-info i { color: var(--info-color); }
.bill-item small.text-success, .detail-section small.text-success { color: var(--success-color) !important; font-weight: 600; display: inline-block; background-color: rgba(var(--success-color-rgb), 0.15); padding: 3px 6px; border-radius: var(--border-radius-sm); line-height: 1.3; margin-top: var(--spacing-xs); }
.bill-amount { font-weight: 600; font-size: var(--font-size-lg); margin-left: auto; text-align: right; white-space: nowrap; }
.bill-actions .manual-pay-btn { /* Style the pay button distinctively if needed */ padding: 0.3rem 0.6rem; font-size: var(--font-size-sm); }

.goals-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--spacing-lg); }
.goal-item { background-color: var(--bg-secondary-dark); border-radius: var(--border-radius-lg); overflow: hidden; border: 1px solid var(--border-color-dark); display: flex; flex-direction: column; transition: box-shadow var(--transition-speed-fast); box-shadow: var(--shadow-md); }
.goal-item:hover { box-shadow: 0 6px 18px rgba(0,0,0,0.3); }
.goal-item.completed { opacity: 0.6; border-left: 4px solid var(--success-color); background-color: var(--bg-tertiary-dark); }
.goal-header { padding: var(--spacing-md); display: flex; justify-content: space-between; align-items: flex-start; border-bottom: 1px solid var(--border-color-dark); }
.goal-content { display: flex; align-items: center; gap: var(--spacing-md); flex-grow: 1; }
.goal-image, .goal-image-placeholder { width: 60px; height: 60px; border-radius: var(--border-radius-md); object-fit: cover; flex-shrink: 0; background-color: var(--bg-tertiary-dark); border: 1px solid var(--border-color-dark); }
.goal-image-placeholder { display: flex; align-items: center; justify-content: center; color: var(--text-muted-dark); font-size: 1.5rem; }
.goal-info h3 { font-size: var(--font-size-lg); margin-bottom: var(--spacing-xs); color: var(--text-primary-dark); }
.goal-meta { font-size: var(--font-size-sm); color: var(--text-secondary-dark); display: flex; flex-wrap: wrap; gap: var(--spacing-sm); }
.goal-meta span { display: inline-flex; align-items: center; }
.goal-meta i { margin-right: 4px; width: 1em; text-align: center;}
.goal-time-left.overdue i { color: var(--danger-color); }
.goal-time-left.due-today i { color: var(--warning-color); }
.goal-time-left.due-soon i { color: var(--info-color); }
.goal-time-left.completed i { color: var(--success-color); }
.goal-progress-details { padding: var(--spacing-md); }
.progress-container { height: 10px; background-color: var(--bg-tertiary-dark); border-radius: 5px; overflow: hidden; margin-bottom: var(--spacing-xs); border: 1px solid var(--border-color-dark); }
.progress-bar { height: 100%; background: linear-gradient(90deg, var(--accent-color-darker), var(--accent-color)); border-radius: 5px; transition: width var(--transition-speed-medium) ease-out; }
.goal-progress-info { display: flex; justify-content: space-between; font-size: var(--font-size-sm); color: var(--text-secondary-dark); }
.projection-info { font-size: var(--font-size-sm); color: var(--text-muted-dark); margin-top: var(--spacing-xs); text-align: center; }
.goal-contribution { display: flex; gap: var(--spacing-sm); margin-top: var(--spacing-md); padding: var(--spacing-md); border-top: 1px solid var(--border-color-dark); background-color: rgba(0,0,0,0.1); }
.contribution-input { flex-grow: 1; }
.goal-complete-action { margin-top: var(--spacing-md); text-align: center; padding-bottom: var(--spacing-md); }

.goals-summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: var(--spacing-md); margin-bottom: var(--spacing-lg); }
.summary-card { display: flex; align-items: center; background-color: var(--bg-tertiary-dark); padding: var(--spacing-md); border-radius: var(--border-radius-md); gap: var(--spacing-md); border: 1px solid var(--border-color-dark); }
.summary-icon { font-size: 1.6rem; color: var(--accent-color); width: 30px; text-align: center; }
.summary-text h4 { font-size: var(--font-size-sm); color: var(--text-secondary-dark); margin-bottom: 2px; font-weight: 400; }
.summary-value { font-size: var(--font-size-lg); font-weight: 600; }
.goals-priority { margin-top: var(--spacing-md); }
.goals-priority h4 { font-size: var(--font-size-base); margin-bottom: var(--spacing-sm); color: var(--text-secondary-dark); font-weight: 500;}
.priority-item { margin-bottom: var(--spacing-sm); font-size: var(--font-size-sm); padding-left: var(--spacing-sm); border-left: 2px solid var(--border-color-dark); }
.priority-name { font-weight: 500; display: inline-block; margin-right: var(--spacing-sm); }
.priority-date { color: var(--text-muted-dark); }
.priority-progress { margin-top: 4px; height: 5px; background-color: var(--bg-tertiary-dark); border-radius: 3px; overflow: hidden; border: 1px solid var(--border-color-dark); }
.priority-progress .progress-bar { height: 100%; background-color: var(--accent-color); border-radius: 3px; }

.notes-list-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--spacing-lg); }
.note-card { background-color: var(--bg-secondary-dark); border-radius: var(--border-radius-md); border: 1px solid var(--border-color-dark); padding: var(--spacing-md); display: flex; flex-direction: column; cursor: pointer; transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease; box-shadow: var(--shadow-sm); }
.note-card:hover { transform: translateY(-3px); box-shadow: var(--shadow-md); border-color: var(--text-muted-dark); }
.note-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--spacing-sm); gap: var(--spacing-sm);}
.note-title { font-size: var(--font-size-base); font-weight: 600; margin-bottom: 0; flex-grow: 1; line-height: 1.3; }
.note-type-indicator { color: var(--text-muted-dark); margin-right: 4px; }
.note-content { font-size: var(--font-size-base); color: var(--text-secondary-dark); margin-bottom: var(--spacing-md); flex-grow: 1; overflow: hidden; line-height: 1.5; max-height: 160px; position: relative; white-space: pre-wrap; word-break: break-word; }
.note-content::after { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 30px; background: linear-gradient(to bottom, transparent, var(--bg-secondary-dark)); pointer-events: none; }
.note-footer { display: flex; justify-content: space-between; align-items: center; font-size: var(--font-size-sm); color: var(--text-muted-dark); border-top: 1px solid var(--border-color-dark); padding-top: var(--spacing-sm); flex-shrink: 0; }
.note-meta-icons { display: flex; gap: var(--spacing-sm); align-items: center; }
.note-meta-icons i { color: var(--text-muted-dark); }
.note-reminder-info.has-reminder-active i { color: var(--warning-color); animation: pulse 1.5s infinite; }
.note-task-info i { margin-right: 3px; }
/* STRONGER Note Colors w/ Transparency */
.note-color-yellow { background-color: rgba(255, 243, 139, 0.5); border-left: 4px solid #FFEB3B; }
.note-color-blue { background-color: rgba(131, 204, 255, 0.5); border-left: 4px solid #2196F3; }
.note-color-green { background-color: rgba(196, 255, 199, 0.5); border-left: 4px solid #4CAF50; }
.note-color-red { background-color: rgba(255, 182, 178, 0.5); border-left: 4px solid #F44336; }
.note-color-purple { background-color: rgba(219, 178, 255, 0.5); border-left: 4px solid #9C27B0; }
.note-card { color: var(--text-primary-dark); }
.note-content { color: var(--text-secondary-dark); }

.task-line-item { display: flex; align-items: baseline; margin-bottom: 2px; }
.task-checkbox-visual { margin-right: var(--spacing-xs); font-family: monospace; color: var(--text-muted-dark); width: 2ch; display: inline-block; text-align: center; }
.task-checkbox-visual.completed { color: var(--success-color); }
.task-text.completed-text { text-decoration: line-through; color: var(--text-muted-dark); }
.note-reader-body { font-size: 1.1rem; line-height: 1.7; white-space: pre-wrap; word-break: break-word; }
.reader-task-checkbox { margin-right: var(--spacing-sm); width: 1.1em; height: 1.1em; cursor: pointer; accent-color: var(--accent-color); vertical-align: middle; }

/* Quick Notes Modal Spacing */
#quickNotesList { display: flex; flex-direction: column; gap: var(--spacing-md); /* Added gap */ }
.quick-note-item { border: 1px solid var(--border-color-dark); border-radius: var(--border-radius-md); padding: var(--spacing-sm); background-color: var(--bg-tertiary-dark); cursor: pointer; transition: background-color var(--transition-speed-fast); }
.quick-note-item:hover { background-color: var(--bg-secondary-dark); }
/* (Other quick note styles from JS should be fine) */

.image-upload-group { margin-top: var(--spacing-md); }
.image-upload-container { border: 2px dashed var(--border-color-dark); border-radius: var(--border-radius-md); padding: var(--spacing-lg); text-align: center; cursor: pointer; position: relative; background-color: var(--bg-tertiary-dark); transition: border-color var(--transition-speed-fast); }
.image-upload-container:hover { border-color: var(--accent-color); }
.image-upload-container i { font-size: 2rem; color: var(--text-muted-dark); margin-bottom: var(--spacing-sm); }
.image-upload-container p { color: var(--text-muted-dark); margin-bottom: 0; }
.image-preview-wrapper { position: relative; margin-top: var(--spacing-md); }
.image-preview-wrapper img { max-width: 100%; max-height: 150px; border-radius: var(--border-radius-sm); border: 1px solid var(--border-color-dark); }
.remove-image-btn { position: absolute; top: 5px; right: 5px; background-color: rgba(0,0,0,0.7); color: white; border: none; border-radius: 50%; width: 22px; height: 22px; font-size: 13px; line-height: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
.remove-image-btn:hover { background-color: var(--danger-color); }

.comparison-grid { display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-lg); }
.product-column { border: 1px solid var(--border-color-dark); padding: var(--spacing-md); border-radius: var(--border-radius-md); background-color: var(--bg-tertiary-dark); }
.product-column h4 { text-align: center; color: var(--text-secondary-dark); margin-bottom: var(--spacing-md); padding-bottom: var(--spacing-sm); border-bottom: 1px solid var(--border-color-dark); font-weight: 500; }
.comparison-result { margin-top: var(--spacing-sm); font-weight: 600; text-align: center; min-height: 1.5em; padding: var(--spacing-xs); border-radius: var(--border-radius-sm); }
.comparison-result.cheaper { color: var(--success-color); background-color: rgba(var(--success-color-rgb), 0.1); }
.comparison-result.more-expensive { color: var(--danger-color); background-color: rgba(var(--danger-color-rgb), 0.1); }
.comparison-summary { background-color: var(--bg-tertiary-dark); padding: var(--spacing-md); border-radius: var(--border-radius-md); text-align: center; margin-top: var(--spacing-md); border: 1px solid var(--border-color-dark); }

.empty-state { display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: var(--spacing-xl); color: var(--text-muted-dark); background-color: rgba(var(--accent-color-rgb), 0.03); border-radius: var(--border-radius-lg); border: 1px dashed var(--border-color-dark); min-height: 200px; }
.empty-state i { font-size: 2.8rem; margin-bottom: var(--spacing-md); color: var(--text-secondary-dark); opacity: 0.5; }
.empty-state h3 { font-size: var(--font-size-lg); color: var(--text-secondary-dark); margin-bottom: var(--spacing-xs); font-weight: 500; }
.empty-state p { margin-bottom: var(--spacing-md); max-width: 400px; }

/* 11. Value Hiding (No Blur) */
body.values-hidden .monetary-value,
body.values-hidden .amount-positive,
body.values-hidden .amount-negative,
body.values-hidden .balance-method-amount .monetary-value,
body.values-hidden .summary-value .monetary-value,
body.values-hidden .goal-progress-info span:first-child .monetary-value,
body.values-hidden .bill-amount .monetary-value,
body.values-hidden .transaction-amount .monetary-value,
body.values-hidden .card-value .monetary-value {
    color: var(--text-muted-dark) !important;
    font-weight: normal !important;
    /* filter: blur(5px); REMOVED BLUR */
    transition: color 0.3s ease; /* Transition color only */
    cursor: default;
    user-select: none;
    display: inline-block; /* Keep for proper pseudo element */
}
body.values-hidden .transaction-amount::before, body.values-hidden .bill-amount::before { content: "" !important; display: none !important; }
body.values-hidden .monetary-value::after { content: "***"; display: inline-block; color: var(--text-muted-dark); font-weight: normal; margin-left: 2px; }
/* Remove R$ prefix potentially added by JS/HTML */
body.values-hidden .monetary-value::before { content: "" !important; display: none !important; }
/* Ensure amount colors are also hidden */
body.values-hidden .amount-positive, body.values-hidden .amount-negative { color: var(--text-muted-dark) !important; }
body.values-hidden .chartjs-tooltip { display: none !important; }
body.values-hidden canvas { opacity: 0.6; /* Dim canvas */ }

/* 12. Utility Classes & Overrides */
.me-auto { margin-right: auto !important; }
.mb-3 { margin-bottom: var(--spacing-md) !important; }
.mt-3 { margin-top: var(--spacing-md) !important; }
.p-4 { padding: var(--spacing-lg) !important; }
.text-center { text-align: center !important; }
.d-flex { display: flex !important; }
.align-items-center { align-items: center !important; }
.me-2 { margin-right: var(--spacing-sm) !important; }
.d-none { display: none !important; }
.fst-italic { font-style: italic !important; }
@media (min-width: 576px) { .d-sm-inline { display: inline !important; } }

/* Pulse animation */
@keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(var(--warning-color-rgb), 0.6); } 70% { box-shadow: 0 0 0 10px rgba(var(--warning-color-rgb), 0); } 100% { box-shadow: 0 0 0 0 rgba(var(--warning-color-rgb), 0); } }

/* 13. Final Responsive Adjustments */
@media (max-width: 992px) {
    /* Filters on medium screens */
    .card-header.filters { gap: var(--spacing-sm); } /* Reduce gap */
    .filter-group { min-width: 120px; } /* Allow more shrinking */
    .filter-group-search { min-width: 150px; }
}

@media (max-width: 768px) {
    :root { --font-size-base: clamp(0.8rem, 2vw + 0.5rem, 0.95rem); }
    .dashboard-grid, .charts-row, .settings-grid, .goals-container, .notes-list-container, .comparison-grid { grid-template-columns: 1fr; gap: var(--spacing-md); }
    .main-content { padding: var(--spacing-md); }
    .card { margin-bottom: var(--spacing-lg); } /* Keep card spacing */
    .card-body, .card-header, .card-footer { padding: var(--spacing-md); }
    .balance-card .card-value { font-size: var(--font-size-xl); }
    .floating-action-btn { width: 50px; height: 50px; font-size: 1.3rem; bottom: var(--spacing-md); right: var(--spacing-md); }
    .modal { width: 95%; max-height: 95vh; }
    .modal-lg, .modal-xl { max-width: 95%; }

    /* Mobile Layout for Transaction/Bill Items */
    .transaction-item, .bill-item {
        display: grid;
        grid-template-columns: auto 1fr; /* Icon | Details/Actions */
        grid-template-rows: auto auto; /* Row for details | Row for amount/actions */
        gap: var(--spacing-xs) var(--spacing-md); /* Small row gap, medium column gap */
        align-items: start; /* Align items to the top of their cell */
        padding: var(--spacing-md);
    }
    .transaction-icon, .bill-category-icon {
        grid-row: 1 / 3; /* Span both rows */
        grid-column: 1 / 2;
        margin-bottom: 0; /* Remove bottom margin */
        align-self: center; /* Center icon vertically */
        width: 35px; height: 35px; font-size: 1rem;
    }
    .transaction-details, .bill-details {
        grid-row: 1 / 2;
        grid-column: 2 / 3;
        margin-right: 0; /* Reset margin */
        align-self: start; /* Align to top */
    }
    /* Create a wrapper conceptually for amount and actions */
    .transaction-amount, .bill-amount {
        grid-row: 2 / 3;
        grid-column: 2 / 3;
        margin-left: 0;
        margin-top: 0; /* Remove top margin */
        text-align: left; /* Align left */
        font-size: var(--font-size-base);
        /* Arrange amount and actions side-by-side */
        display: flex;
        justify-content: space-between; /* Push actions to the right */
        align-items: center; /* Vertically align amount and button */
        width: 100%; /* Take full width of the column */
        gap: var(--spacing-sm); /* Gap between amount and actions */
    }
    .transaction-actions, .bill-actions {
        margin-left: 0;
        margin-top: 0;
        opacity: 1; /* Always visible */
        flex-shrink: 0; /* Prevent actions shrinking */
        align-self: center; /* Align buttons vertically */
    }
    .transaction-item:hover .transaction-actions { opacity: 1; }

     /* Filters on small screens */
     .card-header.filters { flex-direction: column; align-items: stretch; gap: var(--spacing-sm); }
     .filter-group { min-width: 100%; /* Full width */ }
     .filter-group select, .filter-group input { width: 100%; }
}
@media (max-width: 576px) {
    .form-row { flex-direction: column; gap: 0; }
    .modal-footer { flex-direction: column-reverse; gap: var(--spacing-sm); }
    .modal-footer .btn { width: 100%; }
    .sidebar-footer-actions { flex-wrap: wrap; justify-content: center; gap: var(--spacing-sm); }
    .footer-action-btn { width: 40px; height: 40px; font-size: 1rem;}
    .user-profile { flex-direction: column; text-align: center; padding-top: var(--spacing-sm); }
    .user-avatar { margin-right: 0; margin-bottom: var(--spacing-sm); }
    .page-title { font-size: var(--font-size-lg); }
}
